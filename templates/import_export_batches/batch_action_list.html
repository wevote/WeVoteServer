{# templates/import_export_batches/batch_action_list.html #}
{% extends "template_base.html" %}

{% block title %}
    {% if kind_of_batch == "CANDIDATE" %}
        Process Candidate Data
    {% elif kind_of_batch == "CONTEST_OFFICE" %}
        Process Contest Office Data
    {% elif kind_of_batch == "OFFICE_HELD" %}
        Process Office Held Data
    {% elif kind_of_batch == "IMPORT_BALLOT_ITEM" %}
        Import Ballot at One Location
    {% elif kind_of_batch == "IMPORT_POLLING_LOCATION" %}
        Import Map Point
    {% elif kind_of_batch == "MEASURE" %}
        Process Measure Data
    {% elif kind_of_batch == "ORGANIZATION" %}
        Process Endorser Data
    {% elif kind_of_batch == "POLITICIAN" %}
        Process Politician Data
    {% elif kind_of_batch == "POSITION" %}
        Process Position Data
    {% else %}
        Process Data
    {% endif %}
{% endblock %}

{%  block content %}
{% load template_filters %}
{% if batch_set_id %}
    <p><a href="{% url 'import_export_batches:batch_set_batch_list' %}?batch_set_id={{ batch_set_id }}&google_civic_election_id={{ google_civic_election_id }}">
            Back to Batch Set</a></p>
{% else %}
<p><a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}">< Back to Batch List</a></p>
{% endif %}


{% if kind_of_batch == "CANDIDATE" %}
    <p><a href="{% url 'candidate:candidate_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
          target="_blank">Current Candidates{% if google_civic_election_id > 0 %} for this Election{% endif %} <span class="glyphicon glyphicon-new-window"></span></a></p>
{% elif kind_of_batch == "CONTEST_OFFICE" %}
    <p><a href="{% url 'office:office_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
          target="_blank">Current Offices{% if google_civic_election_id > 0 %} for this Election{% endif %} <span class="glyphicon glyphicon-new-window"></span></a></p>
{% elif kind_of_batch == "OFFICE_HELD" %}
{% elif kind_of_batch == "IMPORT_BALLOT_ITEM" %}
    <p><a href="{% url 'election:election_summary' 0 %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
          target="_blank">Current Ballots{% if google_civic_election_id > 0 %} for this Election{% endif %} <span class="glyphicon glyphicon-new-window"></span></a></p>
{% elif kind_of_batch == "IMPORT_POLLING_LOCATION" %}
    <p><a href="{% url 'polling_location:polling_location_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
          target="_blank">Map Points <span class="glyphicon glyphicon-new-window"></span></a></p>
{% elif kind_of_batch == "MEASURE" %}
    <p><a href="{% url 'measure:measure_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
          target="_blank">Current Measures{% if google_civic_election_id > 0 %} for this Election{% endif %} <span class="glyphicon glyphicon-new-window"></span></a></p>
{% elif kind_of_batch == "ORGANIZATION" %}
    <p><a href="{% url 'organization:organization_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
          target="_blank">Current Endorsers{% if google_civic_election_id > 0 %} for this Election{% endif %} <span class="glyphicon glyphicon-new-window"></span></a></p>
{% elif kind_of_batch == "POLITICIAN" %}
{% elif kind_of_batch == "POSITION" %}
    <p><a href="{% url 'position:position_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
          target="_blank">Current Positions{% if google_civic_election_id > 0 %} for this Election{% endif %} <span class="glyphicon glyphicon-new-window"></span></a></p>
{% endif %}


{% if not kind_of_batch %}
<h1>Import Batches</h1>
    To import, you must choose the kind of data you are importing:

    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=IMPORT_BALLOT_ITEM&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}">
        Ballot at One Location</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=CANDIDATE&google_civic_election_id={{ google_civic_election_id }}">
        Candidate</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=CONTEST_OFFICE&google_civic_election_id={{ google_civic_election_id }}">
        Contest Office</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=OFFICE_HELD&google_civic_election_id={{ google_civic_election_id }}">
        Office Held</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=MEASURE&google_civic_election_id={{ google_civic_election_id }}">
        Measure</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=ORGANIZATION&google_civic_election_id={{ google_civic_election_id }}">
        Endorser</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=POLITICIAN&google_civic_election_id={{ google_civic_election_id }}">
        Politician</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=IMPORT_POLLING_LOCATION&google_civic_election_id={{ google_civic_election_id }}">
        Map Point</a> -
    <a href="{% url 'import_export_batches:batch_list' %}?kind_of_batch=POSITION&google_civic_election_id={{ google_civic_election_id }}">
        Position</a>

{% else %}
    <h1>
    {% if kind_of_batch == "IMPORT_BALLOT_ITEM" %}
        Ballot at One Location:
    {% elif kind_of_batch == "CANDIDATE" %}
        Process Candidate Data:
    {% elif kind_of_batch == "OFFICE_HELD" %}
        Process Office Held Data:
    {% elif kind_of_batch == "CONTEST_OFFICE" %}
        Process Contest Office Data:
    {% elif kind_of_batch == "IMPORT_VOTER" %}
        Import/Export Voter:
    {% elif kind_of_batch == "MEASURE" %}
        Process Measure Data:
    {% elif kind_of_batch == "ORGANIZATION" %}
        Process Endorser Data:
    {% elif kind_of_batch == "POLITICIAN" %}
        Process Politician Data:
    {% elif kind_of_batch == "IMPORT_POLLING_LOCATION" %}
        Process Map Point Data:
    {% elif kind_of_batch == "POSITION" %}
        Process Position Data:
    {% else %}
        Kind of batch_action_list data not recognized: Please STOP
    {% endif %}
    {{ batch_description.batch_name }}
    </h1>
    {% if state_list %}
    <form action="{% url 'import_export_batches:batch_action_list' %}" method="get" class="form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="kind_of_batch" value="{{ kind_of_batch }}">
        <input type="hidden" name="batch_header_id" value="{{ batch_header_id }}">
        <input type="hidden" name="polling_location_we_vote_id" value="{{ polling_location_we_vote_id }}">

        <div class="form-group">
            <label for="state_code_id" class="col-sm-3 control-label">Limit to Processing Only One State</label>
            <div class="col-sm-8">
                <select id="state_code_id" name="state_code" class="form-control">
                    <option value="" {% if '' == state_code %} selected="selected"{% endif %}>
                        -- Choose State --</option>
                {% for key, state in state_list %}
                    <option value="{{ key }}"
                            {% if key|lower == state_code|lower %} selected="selected"{% endif %}>
                        {{ state }}</option>
                {% endfor %}
                </select>
            </div>
        </div>
    </form>
    {% endif %}{# End of if state_list #}

    {% if election_list and election_list|length %}
    <div class="form-horizontal">
        <div class="form-group">
            <label for="google_civic_election_id" class="col-sm-3 control-label">Election</label>
            <div class="col-sm-8">
                {% for election in election_list %}
                    {% if election.google_civic_election_id|slugify == batch_description.google_civic_election_id|slugify %}
                        {{ election.election_name }} - {{ election.google_civic_election_id }} - {{ election.election_day_text }}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}{# End of if election_list #}

    {% if batch_description.batch_set_id %}
    <form action="{% url 'import_export_batches:batch_action_list_assign_election_to_rows_process' %}" method="get" class="form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="kind_of_batch" value="{{ kind_of_batch }}">
        <input type="hidden" name="batch_header_id" value="{{ batch_header_id }}">
        <input type="hidden" name="state_code" value="{{ state_code }}">

        <div class="form-group">
            <label for="google_civic_election_id" class="col-sm-3 control-label">Assign Election</label>
            <div class="col-sm-8">
                <input type="text" name="google_civic_election_id" id="google_civic_election_id_id"
                       value="{{ google_civic_election_id }}" />
                <button type="submit" id="assign_election_button_id" name="assign_election_button" class="btn btn-default"
                        value="1">Assign this election to filtered Batch Rows</button>
            </div>
        </div>
    </form>
    {% endif %}{# End of if assign election #}

    {% if polling_location_we_vote_id %}
    <div class="form-horizontal">
        <div class="form-group">
            <label for="polling_location_we_vote_id" class="col-sm-3 control-label">Map Point</label>
            <div class="col-sm-8">
                {{ polling_location_we_vote_id }}
            </div>
        </div>
    </div>
    {% endif %}{# End of if polling_location_we_vote_id #}

    {% if kind_of_batch == "IMPORT_BALLOT_ITEM" %}
    {# TODO Add a way to select a map point, if one doesn't exist #}
    {% endif %}
<div style="display: flex">
  <div>
    <form action="{% url 'import_export_batches:batch_action_list_analyze_process' %}" method="get" class="form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="kind_of_batch" value="{{ kind_of_batch }}">
        <input type="hidden" name="batch_header_id" value="{{ batch_header_id }}">
        <input type="hidden" name="polling_location_we_vote_id" value="{{ polling_location_we_vote_id }}">
        <input type="hidden" name="state_code" value="{{ state_code }}">
        <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
        <button type="submit" id="create_actions_button_id" name="create_actions_button" class="btn btn-primary"
                value={{ kind_of_batch }}>Analyze Data</button>
    </form>
  </div>
  <div>
    <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="kind_of_batch" value="{{ kind_of_batch }}">
        <input type="hidden" name="batch_header_id" value="{{ batch_header_id }}">
        <input type="hidden" name="kind_of_action" value="IMPORT_CREATE">
        <input type="hidden" name="state_code" value="{{ state_code }}">
        <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
        <button type="submit" id="create_import_create_actions_button_id" name="create_actions_button" class="btn btn-primary"
                value={{ kind_of_batch }}>Create Live Data</button>
    </form>
  </div>
  <div>
    <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="kind_of_batch" value="{{ kind_of_batch }}">
        <input type="hidden" name="batch_header_id" value="{{ batch_header_id }}">
        <input type="hidden" name="kind_of_action" value="IMPORT_ADD_TO_EXISTING">
        <input type="hidden" name="state_code" value="{{ state_code }}">
        <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
        <button type="submit" id="create_import_update_actions_button_id" name="create_actions_button" class="btn btn-default"
                value={{ kind_of_batch }}>Update Live Data</button>
    </form>
  </div>
  {# Delete #}
  <div>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </div>
  <div>
    <form action="{% url 'import_export_batches:batch_action_list_analyze_process' %}" method="get" class="form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="kind_of_batch" value="{{ kind_of_batch }}">
        <input type="hidden" name="batch_header_id" value="{{ batch_header_id }}">
        <input type="hidden" name="polling_location_we_vote_id" value="{{ polling_location_we_vote_id }}">
        <input type="hidden" name="state_code" value="{{ state_code }}">
        <input type="hidden" name="delete_analysis_only" value="1" />
        <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
        <button type="submit" id="create_actions_button_id" name="create_actions_button" class="btn btn-default"
                value={{ kind_of_batch }}>Analyze for Deletes</button>
    </form>
  </div>
  <div>
    <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="kind_of_batch" value="{{ kind_of_batch }}">
        <input type="hidden" name="batch_header_id" value="{{ batch_header_id }}">
        <input type="hidden" name="kind_of_action" value="IMPORT_DELETE">
        <input type="hidden" name="state_code" value="{{ state_code }}">
        <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
        <button type="submit" id="create_import_update_actions_button_id" name="create_actions_button" class="btn btn-default"
                value={{ kind_of_batch }}>Delete Live Data</button>
    </form>
  </div>
</div>
{% endif %}

{% if batch_row_list %}
    <br />
    <table style="max-width:900px;">
        <tr>
            <td style="border: 1px solid black; padding: 10px;">READY TO ANALYZE</td>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
            <td class="table-info" style="border: 1px solid black; padding: 10px;">SUCCESSFULLY ANALYZED - READY TO CREATE</td>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
            <td class="table-success" style="border: 1px solid black; padding: 10px;">SUCCESSFULLY CREATED - READY TO UPDATE IF NEEDED</td>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
            <td class="table-danger" style="border: 1px solid black; padding: 10px;">COULD NOT IMPORT - ERROR</td>
        </tr>
        <tr>
            <td>Check the info against our database to make sure we can save. Click the "Analyze Data" button to proceed.</td>
            <td></td>
            <td>These records are ready to create. Click "Create Live Data" to proceed.</td>
            <td></td>
            <td>These records have been saved successfully. Click the "Update Live Data" button to save added endorsement text to existing positions.</td>
            <td></td>
            <td>The data couldn't be fully processed. Bring the url of this page to the next team meeting so we can discuss.</td>
        </tr>
    </table>
    <br />
    <table class="table table-bordered">
    {% for one_batch_row in batch_row_list %}
    {% if forloop.counter == 1 or forloop.counter|divisibleby:10 %}
    {# Show the header every ~9 lines #}
      <thead>
        <tr>
            <th colspan="2">
              {% if forloop.counter == 1 %}
                <a href="{% url 'import_export_batches:batch_header_mapping' %}?batch_header_id={{ batch_header_id }}&kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}">(edit header&nbsp;map)</a>
              {% endif %}
            </th>
            <th>{{ batch_header_map.batch_header_map_000 }}</th>
            <th>{{ batch_header_map.batch_header_map_001 }}</th>
            <th>{{ batch_header_map.batch_header_map_002 }}</th>
            {% if batch_header_map.batch_header_map_003 %}<th>{{ batch_header_map.batch_header_map_003 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_004 %}<th>{{ batch_header_map.batch_header_map_004 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_005 %}<th>{{ batch_header_map.batch_header_map_005 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_006 %}<th>{{ batch_header_map.batch_header_map_006 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_007 %}<th>{{ batch_header_map.batch_header_map_007 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_008 %}<th>{{ batch_header_map.batch_header_map_008 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_009 %}<th>{{ batch_header_map.batch_header_map_009 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_010 %}<th>{{ batch_header_map.batch_header_map_010 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_011 %}<th>{{ batch_header_map.batch_header_map_011 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_012 %}<th>{{ batch_header_map.batch_header_map_012 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_013 %}<th>{{ batch_header_map.batch_header_map_013 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_014 %}<th>{{ batch_header_map.batch_header_map_014 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_015 %}<th>{{ batch_header_map.batch_header_map_015 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_016 %}<th>{{ batch_header_map.batch_header_map_016 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_017 %}<th>{{ batch_header_map.batch_header_map_017 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_018 %}<th>{{ batch_header_map.batch_header_map_018 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_019 %}<th>{{ batch_header_map.batch_header_map_019 }}</th>{% endif %}
            {% if batch_header_map.batch_header_map_020 %}<th>{{ batch_header_map.batch_header_map_020 }}</th>{% endif %}
        </tr>
      </thead>
    {% endif %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_DELETE" %}
            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ALREADY_DELETED" %}
            {% else %}
              <a href="{% url 'import_export_batches:batch_action_list_analyze_process' %}?batch_header_id={{ batch_header_id }}&batch_row_id={{ one_batch_row.id }}&state_code={{ one_batch_row.state_code }}">
                Analyze</a>
            {% endif %}
                {% if one_batch_row.state_code %}<br />
                    state: {{ one_batch_row.state_code }}
                {% endif %}
                {% if one_batch_row.google_civic_election_id %}<br />
                    eid: {{ one_batch_row.google_civic_election_id }}
                {% endif %}
            </td>
            <td>{{ one_batch_row.batch_row_000|default_if_none:""|truncatechars:255 }}</td>
            <td>{{ one_batch_row.batch_row_001|default_if_none:""|truncatechars:255 }}</td>
            <td>{{ one_batch_row.batch_row_002|default_if_none:""|truncatechars:255 }}</td>
            {% if batch_header_map.batch_header_map_003 %}<td>{{ one_batch_row.batch_row_003|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_004 %}<td>{{ one_batch_row.batch_row_004|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_005 %}<td>{{ one_batch_row.batch_row_005|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_006 %}<td>{{ one_batch_row.batch_row_006|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_007 %}<td>{{ one_batch_row.batch_row_007|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_008 %}<td>{{ one_batch_row.batch_row_008|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_009 %}<td>{{ one_batch_row.batch_row_009|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_010 %}<td>{{ one_batch_row.batch_row_010|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_011 %}<td>{{ one_batch_row.batch_row_011|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_012 %}<td>{{ one_batch_row.batch_row_012|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_013 %}<td>{{ one_batch_row.batch_row_013|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_014 %}<td>{{ one_batch_row.batch_row_014|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_015 %}<td>{{ one_batch_row.batch_row_015|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_016 %}<td>{{ one_batch_row.batch_row_016|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_017 %}<td>{{ one_batch_row.batch_row_017|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_018 %}<td>{{ one_batch_row.batch_row_018|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_019 %}<td>{{ one_batch_row.batch_row_019|default_if_none:""|truncatechars:255 }}</td>{% endif %}
            {% if batch_header_map.batch_header_map_020 %}<td>{{ one_batch_row.batch_row_020|default_if_none:""|truncatechars:255 }}</td>{% endif %}
        </tr>
        {% if one_batch_row.batch_row_action_exists %}
        <tr>
            <td>&nbsp;</td>
            <td colspan="50"><table class="table table-condensed table-bordered">
            {% if one_batch_row.kind_of_batch == "CANDIDATE" %}
            {# ####################################### #}
            {# ### CANDIDATE ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>candidate name</th>
                        <th>office name</th>
                        <th>google civic election id</th>
                        <th>state_code</th>
                        <th>party name</th>
                        <th>twitter_handle</th>
                        <th>facebook</th>
                        <th>email</th>
                        <th>website</th>
                        <th>incumbent</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="CANDIDATE">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <input type="hidden" name="state_code" value="{{ state_code }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="CANDIDATE">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <input type="hidden" name="state_code" value="{{ state_code }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>UPDATE</button>

                                <a href="{% url 'candidate:candidate_edit_we_vote_id' candidate_we_vote_id=one_batch_row.batch_row_action.candidate_we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
                                   target="_blank">
                                {{ one_batch_row.batch_row_action.candidate_we_vote_id }} <span class="glyphicon glyphicon-new-window"></span>
                                </a>
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>
                            {% if one_batch_row.batch_row_action.photo_url %}
                            <img src="{{ one_batch_row.batch_row_action.photo_url }}" height="50"><br />
                            <br />
                            {% endif %}
                            {{ one_batch_row.batch_row_action.candidate_name|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.ballotpedia_candidate_name %}
                                <br />
                                bp: {{ one_batch_row.batch_row_action.ballotpedia_candidate_name|default_if_none:"" }}
                            {% endif %}
                        </td>
                        <td>
                            {{ one_batch_row.batch_row_action.contest_office_name|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.contest_office_we_vote_id %}
                            <span> ({{ one_batch_row.batch_row_action.contest_office_we_vote_id|default_if_none:"" }})</span>
                            {% endif %}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                                <br />
                                <a href="{% url 'office:office_list' %}?kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}&office_search={{ one_batch_row.batch_row_action.contest_office_name|default_if_none:"" }}"
                                   target="_blank">Search for Office <span class="glyphicon glyphicon-new-window"></span></a>
                            {% endif %}
                            {% if one_batch_row.batch_row_action.batch_row_action_office_ctcl_uuid %}
                            <br /><span>office: {{ one_batch_row.batch_row_action.batch_row_action_office_ctcl_uuid|default_if_none:"" }}</span>
                            {% endif %}
                        </td>
                        <td>
                          {{ one_batch_row.batch_row_action.google_civic_election_id|default_if_none:"" }}
                          {% if one_batch_row.batch_row_action.ballotpedia_election_id %}
                            <br />bp: {{ one_batch_row.batch_row_action.ballotpedia_election_id|default_if_none:"" }}
                          {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.state_code|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.party|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.candidate_twitter_handle|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.facebook_url|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.candidate_email|default_if_none:"" }}</td>
                        <td>
                          url: {{ one_batch_row.batch_row_action.candidate_url|default_if_none:"" }}<br />
                          bp: {{ one_batch_row.batch_row_action.ballotpedia_candidate_url|default_if_none:"" }}<br />
                          form: {{ one_batch_row.batch_row_action.candidate_contact_form_url|default_if_none:"" }}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.candidate_is_incumbent|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "CONTEST_OFFICE" %}
            {# ####################################### #}
            {# ### CONTEST_OFFICE ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>office name</th>
                        <th>election</th>
                        <th>state_code</th>
                        <th>district id</th>
                        <th>district name</th>
                        <th>ocd id</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="CONTEST_OFFICE">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="CONTEST_OFFICE">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>UPDATE</button>
                                {{ one_batch_row.batch_row_action.contest_office_we_vote_id }}
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.contest_office_name|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.contest_office_we_vote_id %}
                            <span> (<a href="{% url 'office:office_edit_we_vote_id' one_batch_row.batch_row_action.contest_office_we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
                                       target="_blank">{{ one_batch_row.batch_row_action.contest_office_we_vote_id|default_if_none:"" }} <span class="glyphicon glyphicon-new-window"></span></a>)</span>
                            {% endif %}
                        </td>
                        <td>
                          {{ one_batch_row.batch_row_action.google_civic_election_id|default_if_none:"" }}
                          {% if one_batch_row.batch_row_action.ballotpedia_election_id %}
                            <br />bp: {{ one_batch_row.batch_row_action.ballotpedia_election_id|default_if_none:"" }}
                          {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.state_code|default_if_none:"" }}</td>
                        <td>
                          {{ one_batch_row.batch_row_action.district_id|default_if_none:"" }}
                          {% if one_batch_row.batch_row_action.ballotpedia_district_id %}
                            <br />bp: {{ one_batch_row.batch_row_action.ballotpedia_district_id|default_if_none:"" }}
                          {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.district_name|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.ocd_division_id|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "OFFICE_HELD" %}
            {# ####################################### #}
            {# ### OFFICE_HELD ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                    table-info
                    {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                    table-success
                    {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                    table-danger
                    {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                    table-danger
                    {% endif %}">
                        <th></th>
                        <th>name</th>
                        <th>state_code</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                    table-info
                    {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                    table-success
                    {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                    table-danger
                    {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                    table-danger
                    {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="OFFICE_HELD">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default" value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="OFFICE_HELD">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default" value={{ one_batch_row.batch_row_action.id }}>UPDATE</button>
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.office_held_name|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.state_code|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "MEASURE" %}
            {# ####################################### #}
            {# ### MEASURE ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>measure_title</th>
                        <th>election id</th>
                        <th>state_code</th>
                        <th>district id</th>
                        <th>measure_subtitle</th>
                        <th>ballotpedia_measure_url</th>
                        <th>ballotpedia_yes_vote_description</th>
                        <th>ballotpedia_no_vote_description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="MEASURE">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="MEASURE">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>UPDATE</button>
                                {{ one_batch_row.batch_row_action.measure_we_vote_id }}
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.measure_title|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.measure_we_vote_id %}
                            <span> (<a href="{% url 'measure:measure_edit_we_vote_id' one_batch_row.batch_row_action.measure_we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
                                       target="_blank">{{ one_batch_row.batch_row_action.measure_we_vote_id|default_if_none:"" }} <span class="glyphicon glyphicon-new-window"></span></a>)</span>
                            {% endif %}
                            {% if one_batch_row.batch_row_action.ballotpedia_measure_id %}
                            <br /><span>ballotpedia_measure_id: {{ one_batch_row.batch_row_action.ballotpedia_measure_id|default_if_none:"" }}</span>
                            {% endif %}
                        </td>
                        <td>
                          {{ one_batch_row.batch_row_action.google_civic_election_id|default_if_none:"" }}
                          {% if one_batch_row.batch_row_action.ballotpedia_election_id %}
                            <br />bp: {{ one_batch_row.batch_row_action.ballotpedia_election_id|default_if_none:"" }}
                          {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.state_code|default_if_none:"" }}</td>
                        <td>
                          {{ one_batch_row.batch_row_action.district_id|default_if_none:"" }}
                          {% if one_batch_row.batch_row_action.ballotpedia_district_id %}
                            <br />bp: {{ one_batch_row.batch_row_action.ballotpedia_district_id|default_if_none:"" }}
                          {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.measure_subtitle|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.ballotpedia_measure_url|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.ballotpedia_yes_vote_description|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.ballotpedia_no_vote_description|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "ORGANIZATION" %}
            {# ####################################### #}
            {# ### ORGANIZATION ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>name</th>
                        <th>twitter</th>
                        <th>facebook</th>
                        <th>instagram</th>
                        <th>address</th>
                        <th>city</th>
                        <th>state</th>
                        <th>zip</th>
                        <th>phone1</th>
                        <th>website</th>
                        <th>type</th>
                        <th>state_served_code</th>
                        <th>contact</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="ORGANIZATION">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default" value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="ORGANIZATION">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default" value={{ one_batch_row.batch_row_action.id }}>Update</button>
                                {{ one_batch_row.batch_row_action.organization_we_vote_id }}
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.organization_name|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_twitter_handle|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_facebook|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_instagram_handle|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_address|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_city|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_state|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_zip|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_phone1|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_website|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_type|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.state_served_code|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.organization_contact_name|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "POLITICIAN" %}
            {# ####################################### #}
            {# ### POLITICIAN ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>politician name</th>
                        <th>state_code</th>
                        <th>party</th>
                        <th>twitter</th>
                        <th>email</th>
                        <th>url</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="POLITICIAN">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="POLITICIAN">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>UPDATE</button>
                                {{ one_batch_row.batch_row_action.contest_office_we_vote_id }}
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.politician_name|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.contest_office_we_vote_id %}
                            <span> ({{ one_batch_row.batch_row_action.politician_we_vote_id|default_if_none:"" }})</span>
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.state_code|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.political_party|default_if_none:"" }}</td>
                        <td>
                            {{ one_batch_row.batch_row_action.politician_twitter_handle|default_if_none:"" }}
                        {% if one_batch_row.batch_row_action.politician_twitter_handle2 %}
                            <br />{{ one_batch_row.batch_row_action.politician_twitter_handle2|default_if_none:"" }}
                        {% endif %}
                        {% if one_batch_row.batch_row_action.politician_twitter_handle3 %}
                            <br />{{ one_batch_row.batch_row_action.politician_twitter_handle3|default_if_none:"" }}
                        {% endif %}
                        {% if one_batch_row.batch_row_action.politician_twitter_handle4 %}
                            <br />{{ one_batch_row.batch_row_action.politician_twitter_handle4|default_if_none:"" }}
                        {% endif %}
                        {% if one_batch_row.batch_row_action.politician_twitter_handle5 %}
                            <br />{{ one_batch_row.batch_row_action.politician_twitter_handle5|default_if_none:"" }}
                        {% endif %}
                        </td>
                        <td>
                            {{ one_batch_row.batch_row_action.politician_email|default_if_none:"" }}
                            {{ one_batch_row.batch_row_action.politician_email2|default_if_none:"" }}
                            {{ one_batch_row.batch_row_action.politician_email3|default_if_none:"" }}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.politician_url|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "IMPORT_POLLING_LOCATION" %}
            {# ####################################### #}
            {# ### IMPORT_POLLING_LOCATION ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>location</th>
                        <th>line1</th>
                        <th>city</th>
                        <th>state</th>
                        <th>ZIP</th>
                        <th>source code</th>
                        <th>county</th>
                        <th>precinct</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="IMPORT_POLLING_LOCATION">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="IMPORT_POLLING_LOCATION">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>UPDATE</button>
                                {{ one_batch_row.batch_row_action.contest_office_we_vote_id }}
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.location_name|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.line1|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.city|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.state|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.zip_long|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.source_code|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.county_name|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.precinct_name|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "POSITION" %}
            {# ####################################### #}
            {# ### POSITION ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>ballot item name</th>
                        <th>office</th>
                        <th>speaker_display_name</th>
                        <th>speaker_twitter</th>
                        <th>stance</th>
                        <th>statement</th>
                        <th>more_info_url</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="POSITION">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default" value={{ one_batch_row.batch_row_action.id }}>Create</button>
                            </form>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="POSITION">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default" value={{ one_batch_row.batch_row_action.id }}>UPDATE</button>
                            </form>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                        </td>
                        <td>
                            {{ one_batch_row.batch_row_action.ballot_item_display_name|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.candidate_campaign_we_vote_id %}
                                (<a href="{% url 'candidate:candidate_edit_we_vote_id' candidate_we_vote_id=one_batch_row.batch_row_action.candidate_campaign_we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}#positions"
                                    target="_blank">
                                {{ one_batch_row.batch_row_action.candidate_campaign_we_vote_id }}
                                <span class="glyphicon glyphicon-new-window"></span>
                                </a>)
                            {% elif one_batch_row.batch_row_action.contest_measure_we_vote_id %}
                                (<a href="{% url 'measure:measure_edit_we_vote_id' one_batch_row.batch_row_action.contest_measure_we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}#positions"
                                    target="_blank">
                                {{ one_batch_row.batch_row_action.contest_measure_we_vote_id }}
                                <span class="glyphicon glyphicon-new-window"></span>
                                </a>)
                            {% endif %}
                        </td>
                        <td>
                            {{ one_batch_row.batch_row_action.contest_office_name|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.contest_office_we_vote_id %}
                                ({{ one_batch_row.batch_row_action.contest_office_we_vote_id }})
                            {% endif %}
                        </td>
                        <td>
                            {% if one_batch_row.batch_row_action.organization_we_vote_id %}
                            <a href="{% url 'organization:organization_we_vote_id_position_list' one_batch_row.batch_row_action.organization_we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
                               target="_blank">
                            {{ one_batch_row.batch_row_action.speaker_display_name|default_if_none:"" }}
                            <span class="glyphicon glyphicon-new-window"></span>
                            </a>
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.speaker_twitter_handle|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.stance|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.statement_text|default_if_none:""|truncatechars:125 }}</td>
                        <td>{{ one_batch_row.batch_row_action.more_info_url|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% elif one_batch_row.kind_of_batch == "IMPORT_BALLOT_ITEM" %}
            {# ####################################### #}
            {# ### IMPORT_BALLOT_ITEM ### #}
            {# ####################################### #}
                <thead>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_DELETE" %}
                        table-warning
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ALREADY_DELETED" %}
                        table-warning
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <th></th>
                        <th>local ballot order</th>
                        <th>ballot item display name</th>
                        <th>election</th>
                        <th>state</th>
                        <th>map point</th>
                        <th>yes vote description</th>
                        <th>no vote description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_DELETE" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ALREADY_DELETED" %}
                        table-warning
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td>
                            {# Based on the results of analysis, show button to do the action #}
                            <form action="{% url 'import_export_batches:batch_action_list_update_or_create_process' %}" method="get" class="form-horizontal">
                                {% csrf_token %}
                                <input type="hidden" name="kind_of_batch" value="IMPORT_BALLOT_ITEM">
                                <input type="hidden" name="batch_header_id" value="{{ one_batch_row.batch_header_id }}">
                                <input type="hidden" name="kind_of_action" value="{{ one_batch_row.batch_row_action.kind_of_action }}">
                                <label for="create_actions_button_id" class="col-sm-3 control-label"></label>
                            {% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>
                                   Create
                                </button>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                                <input type="hidden" name="batch_row_id" value="{{ one_batch_row.id }}">
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>Update</button>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_DELETE" %}
                                <input type="hidden" name="ballot_item_id" value="{{ one_batch_row.batch_row_action.ballot_item_id }}">
                                <button type="submit" id="create_batch_row_action_id_id" name="create_batch_row_action_id" class="btn btn-default"
                                        value={{ one_batch_row.batch_row_action.id }}>Delete</button>
                            {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ALREADY_DELETED" %}
                                <input type="hidden" name="ballot_item_id" value="{{ one_batch_row.batch_row_action.ballot_item_id }}">
                                <strong>Already Deleted</strong>
                            {% else %}
                                {{ one_batch_row.batch_row_action.kind_of_action }}
                            {% endif %}
                            </form>
                        </td>
                        <td>{{ one_batch_row.batch_row_action.local_ballot_order|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.ballot_item_display_name|default_if_none:"" }}
                            {% if one_batch_row.batch_row_action.contest_office_we_vote_id %}
                            <span> ({{ one_batch_row.batch_row_action.contest_office_we_vote_id|default_if_none:"" }})</span>
                            {% elif one_batch_row.batch_row_action.measure_we_vote_id %}
                            <span> ({{ one_batch_row.batch_row_action.measure_we_vote_id|default_if_none:"" }})</span>
                            {% endif %}
                        </td>
                        <td>{{ one_batch_row.batch_row_action.google_civic_election_id|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.state_code|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.polling_location_we_vote_id|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.yes_vote_description|default_if_none:"" }}</td>
                        <td>{{ one_batch_row.batch_row_action.no_vote_description|default_if_none:"" }}</td>
                    </tr>
                    {% if one_batch_row.batch_row_action.status %}
                    <tr class="{% if one_batch_row.batch_row_action.kind_of_action == "IMPORT_CREATE" %}
                        table-info
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ADD_TO_EXISTING" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_DELETE" %}
                        table-success
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_ALREADY_DELETED" %}
                        table-warning
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_TO_BE_DETERMINED" %}
                        table-danger
                        {% elif one_batch_row.batch_row_action.kind_of_action == "IMPORT_QUERY_ERROR" %}
                        table-danger
                        {% endif %}">
                        <td colspan="20">STATUS: {{ one_batch_row.batch_row_action.status }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            {% endif %}
            </table></td>
        </tr>
        {% endif %}{% endfor %}
    </table>

    <p></p>
    <a href="?batch_header_id={{ batch_header_id }}&kind_of_batch={{ kind_of_batch }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}&show_all=1">show all</a>

{% else %}
    <br />
    <br />
    <br />
    <div>
        <p>(no batches found)</p>
    </div>
{% endif %}


    <script>
        $(function() {
            $('#google_civic_election_id').change(function() {
                this.form.submit();
            });
        });
    </script>

    <script>
        $(function() {
            $('#state_code_id').change(function() {
                this.form.submit();
            });
        });
    </script>

{% endblock %}
