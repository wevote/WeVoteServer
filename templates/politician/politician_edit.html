{# templates/politician/politician_edit.html #}
{% extends "template_base.html" %}

{% block title %}{% if politician %}{{ politician.politician_name  }}: Politician Edit Page{% else %}New Politician{% endif %}{% endblock %}

{%  block content %}
{% load humanize %}
{% load template_filters %}
<a href="{% url 'politician:politician_list' %}?state_code={{ state_code }}">
    &lt; Back to Politicians</a>

<h1>
    {% if politician %}Edit Politician:
        {% if politician.we_vote_hosted_profile_image_url_medium %}
            
            <div style='display: inline-block; height: 48px; width: 96px; background:{{ politician.profile_image_background_color }}'> 
                <img src='{{ politician.we_vote_hosted_profile_image_url_medium }}' style='margin-left: 25%;'/>
            </div> 
         
            {% endif %}
        {{ politician.politician_name }}
    {% else %}New Politician{% endif %}
</h1>
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<style>
  .padded {
    padding: 0 4px;
  }
</style>

<form action="{% url "politician:politician_edit_process" %}" method="post" class="form-horizontal" enctype="multipart/form-data">
{% csrf_token %}

<input type="hidden" name="politician_id" value="{% if politician %}{{ politician.id }}{% else %}0{% endif %}">

{# There is another submit button at bottom of form #}
<p><a href="{% url 'politician:politician_list' %}?state_code={{ state_code }}">cancel</a>
<input name="submit_text" type="submit" value="{% if politician %}Update Politician{% else %}Save New Politician{% endif %}" /></p>


<div class="form-group">
    <label for="profile_image_type_currently_active_id" class="col-sm-3 control-label">
        Politician Photo Choice<br />
        <span style="color: darkgray">{{ politician.profile_image_type_currently_active }}</span>
    </label>
    <div class="col-sm-8">
    {# UNKNOWN IMAGE #}
        <span style="float: left; padding: 8px 20px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="UNKNOWN"
                {% if politician.profile_image_type_currently_active == 'UNKNOWN' %} checked {% endif %}
                />
        {% if politician.we_vote_hosted_profile_twitter_image_url_tiny %}
            <span style="text-decoration: line-through">Unknown</span>
        {% else %}
            Unknown
        {% endif %}
        </span>
    {# Uploaded photo #}
        <span style="float: left; padding: 8px 20px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="UPLOADED"
                {% if politician.profile_image_type_currently_active == 'UPLOADED' %} checked {% endif %}
                />
            Uploaded
        {% if politician.we_vote_hosted_profile_uploaded_image_url_tiny %}
            <img src='{{ politician.we_vote_hosted_profile_uploaded_image_url_tiny }}' />
            <label for="politician_photo_file_delete_id">
              <input type="checkbox" name="politician_photo_file_delete" id="politician_photo_file_delete_id" value="1" />
                delete&nbsp;&nbsp;&nbsp;
            </label>
        {% else %}
            <input type="file" name="politician_photo_file" accept="image/*">
        {% endif %}
        </span>
    {# Facebook photo #}
        {% if politician.we_vote_hosted_profile_facebook_image_url_tiny %}
        <span style="float: left; padding: 8px 20px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="FACEBOOK"
                {% if politician.profile_image_type_currently_active == 'FACEBOOK' %} checked {% endif %}
                />
            <img src='{{ politician.we_vote_hosted_profile_facebook_image_url_tiny }}' />
            Facebook
        </span>
        {% endif %}
    {# TWITTER IMAGE #}
        {% if politician.we_vote_hosted_profile_twitter_image_url_tiny %}
        <span style="float: left; padding: 8px 20px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="TWITTER"
                {% if politician.profile_image_type_currently_active == 'TWITTER' %} checked {% endif %}
                />
            <img src='{{ politician.we_vote_hosted_profile_twitter_image_url_tiny }}' />
            Twitter
        </span>
        {% endif %}
    {# BALLOTPEDIA IMAGE #}
        {% if politician.we_vote_hosted_profile_ballotpedia_image_url_tiny %}
        <span style="float: left; padding: 8px 20px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="BALLOTPEDIA"
                {% if politician.profile_image_type_currently_active == 'BALLOTPEDIA' %} checked {% endif %}
                />
            <img src='{{ politician.we_vote_hosted_profile_ballotpedia_image_url_tiny }}' />
            Ballotpedia
        </span>
        {% endif %}
    {# LINKEDIN IMAGE #}
        {% if politician.we_vote_hosted_profile_linkedin_image_url_tiny %}
        <span style="float: left; padding: 8px 20px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="LINKEDIN"
                {% if politician.profile_image_type_currently_active == 'LINKEDIN' %} checked {% endif %}
                />
            <img src='{{ politician.we_vote_hosted_profile_linkedin_image_url_tiny }}' />
            LinkedIn
        </span>
        {% endif %}
    {# VOTE_USA IMAGE #}
        {% if politician.we_vote_hosted_profile_vote_usa_image_url_tiny %}
        <span style="float: left; padding: 8px 25px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="VOTE_USA"
                {% if politician.profile_image_type_currently_active == 'VOTE_USA' %} checked {% endif %}
                />
            <img src='{{ politician.we_vote_hosted_profile_vote_usa_image_url_tiny }}' />
            Vote USA
        {% endif %}
        </span>
    {# WIKIPEDIA IMAGE #}
        {% if politician.we_vote_hosted_profile_wikipedia_image_url_tiny %}
        <span style="float: left; padding: 8px 25px 0 0;">
            <input type="radio" name="profile_image_type_currently_active" value="WIKIPEDIA"
                {% if politician.profile_image_type_currently_active == 'WIKIPEDIA' %} checked {% endif %}
                />
            <img src='{{ politician.we_vote_hosted_profile_wikipedia_image_url_tiny }}' />
            Wikipedia
        {% endif %}
        </span>
    </div>
</div>

<div class="form-group">
    <label for="first_name_id" class="col-sm-3 control-label">Background Color</label>
    <div class="col-sm-8">
        
        <input type="text" name="profile_image_background_color" id="profile_image_background_color_id" class="form-control"
               value="{% if politician %}{{ politician.profile_image_background_color|default_if_none:"" }}{% else %}{{ profile_image_background_color|default_if_none:"" }}{% endif %}" />
        <input name="regenerate_color" id="regenerate_color_id" type="checkbox"/>
        <label for="regenerate_color_id">&nbsp;Regenerate default color</label>
       {#  <label>Regenerate default color &#40;different algorithm&#41;  &nbsp;</label><input name="regenerate_color_edge_case" type="checkbox"/> #}
    </div>
</div>

<div class="form-group">
    <label for="politician_name_id" class="col-sm-3 control-label">
        Politician Name
        {% if politician.supporters_count %}
            <div class="u-no-break" style="color: darkgray; font-size: 10px;">supporters_count: {{ politician.supporters_count }}</div>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="politician_name" id="politician_name_id" class="form-control pol_name_text"
               value="{% if politician %}{{ politician.politician_name|default_if_none:"" }}{% else %}{{ politician_name|default_if_none:"" }}{% endif %}" />
        {% if politician %}
            {% if politician.politician_name_normalized|length|get_digit:"-1" > 0 %}
                <span style='display: inline-block; width: 50%; text-align: left; padding-left: 6px'>
                    <span id='hidden_name' style="display:none;">{{ politician.politician_name_normalized }}</span>
                    <button type="button" id="update_name_id" name="update_name" style="border-width: 1px">
                        Change name to <span style='font-weight: 900; margin-left: 1px'>{{ politician.politician_name_normalized }}</span>
                    </button>
                </span>
            {% endif %}
            <div>
                {{ politician.we_vote_id }} (politician id: {{ politician.id }})
                (<a href="{% url 'politician:politician_delete_process' %}?politician_id={{ politician.id }}">delete politician</a>)
                {{ we_vote_id }}
                {% if politician.linked_campaignx_we_vote_id %}
                    &nbsp;&nbsp;&nbsp;
                    <span style="color: darkgray;">We generated a campaign:</span>
                    <a href="{% url 'campaign:campaignx_summary' politician.linked_campaignx_we_vote_id %}"
                       target="_blank">
                        {{ politician.linked_campaignx_we_vote_id }}
                        <span class="glyphicon glyphicon-new-window"></span>
                    </a>
                    <span style="color: darkgray;">for {{ politician.politician_name|default_if_none:"" }}.</span>
                {% endif %}
            </div>
            {% include "office_held/is_battleground_race_year_checkboxes.html" with office_held=politician %}
        {% endif %}
    </div>
</div>

<div class="row">
	<div class="form-group col-sm-3 mr-1">
		<label for="first_name_id" class="control-label">First Name</label>
		<div class="">
			<input type="text" name="first_name" id="first_name_id" class="form-control"
				value="{% if politician %}{{ politician.first_name|default_if_none:"" }}{% else %}{{ first_name|default_if_none:"" }}{% endif %}" />
		</div>
	</div>

	<div class="form-group col-sm-3 mr-1">
		<label for="middle_name_id" class="control-label">Middle Name</label>
		<div class="">
			<input type="text" name="middle_name" id="middle_name_id" class="form-control"
				value="{% if politician %}{{ politician.middle_name|default_if_none:"" }}{% else %}{{ middle_name|default_if_none:"" }}{% endif %}" />
		</div>
	</div>

	<div class="form-group col-sm-3 mr-1">
		<label for="last_name_id" class="control-label">Last Name</label>
		<div class="">
			<input type="text" name="last_name" id="last_name_id" class="form-control"
				value="{% if politician %}{{ politician.last_name|default_if_none:"" }}{% else %}{{ last_name|default_if_none:"" }}{% endif %}" />
		</div>
	</div>
</div>

<div class="form-group">
    <label for="gender_id" class="col-sm-3 control-label">Gender</label>
    <div class="col-sm-8 u-no-break">
        <div>
        <span style="border: 1px solid #ccc; border-radius: 4px; padding: 10px 6px 10px 10px">
            <input type="radio" name="gender" id="gender_unknown_id" value="U"
                {% if politician %}{% if politician.gender == 'U' %}checked{% endif %}{% else %}{% if gender == 'U' %}checked{% endif %}{% endif %} />
            <label for="gender_unknown_id" style="padding-right: 8px;">Unknown</label>
            <input type="radio" name="gender" id="gender_female_id" value="F"
                {% if politician %}{% if politician.gender == 'F' %}checked{% endif %}{% else %}{% if gender == 'F' %}checked{% endif %}{% endif %} />
            <label for="gender_female_id" style="padding-right: 8px;">Female</label>
            <input type="radio" name="gender" id="gender_male_id" value="M"
                {% if politician %}{% if politician.gender == 'M' %}checked{% endif %}{% else %}{% if gender == 'M' %}checked{% endif %}{% endif %} />
            <label for="gender_male_id" style="padding-right: 8px;">Male</label>
            <input type="radio" name="gender" id="gender_neutral_id" value="N"
                {% if politician %}{% if politician.gender == 'N' %}checked{% endif %}{% else %}{% if gender == 'N' %}checked{% endif %}{% endif %} />
            <label for="gender_neutral_id">Nonbinary</label>
        </span>
        <span class="u-no-break">
            <label for="gender_source_label" style="padding-left: 5%; padding-right: 10px">Source of Gender Identification</label>
            <span id="sourceString" style="color: darkgrey">{% if politician %}{% if politician.gender_likelihood == '' %}None{% else %}{{ politician.gender_likelihood }}{% endif %}{% endif %}</span>
        </span>
        </div>
    </div>
</div>

<div class="form-group">
    <label for="seo_friendly_path_id" class="col-sm-3 control-label">
        SEO Friendly Path
        {% if politician.seo_friendly_path %}
            <a href="{{ web_app_root_url }}/{{ politician.seo_friendly_path }}/-/" target="_blank">
            <span class="glyphicon glyphicon-new-window"></span>
            </a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="seo_friendly_path" id="seo_friendly_path_id" class="form-control"
               value="{% if politician %}{{ politician.seo_friendly_path|default_if_none:"" }}{% else %}{{ seo_friendly_path|default_if_none:"" }}{% endif %}" />
    {% if path_list %}
        {% include "politician/seo_friendly_path_list.html" with path_list=path_list %}
    {% else %}
        <div style="color: darkgray">
        No alternate URL paths found.
        </div>
    {% endif %}
    </div>
</div>


<div class="row">
	<div class="form-group col-sm-3 mr-1">
		<label for="google_civic_candidate_name_id" class="control-label u-no-break">Politician Name (for Google Civic matching)</label>
		<div class="">
			<input type="text" name="google_civic_candidate_name" id="google_civic_candidate_name_id" class="form-control"
				value="{% if politician %}{{ politician.google_civic_candidate_name|default_if_none:"" }}{% else %}{{ google_civic_candidate_name|default_if_none:"" }}{% endif %}" />
		</div>
	</div>

	<div class="form-group col-sm-3 mr-1">
		<label for="google_civic_candidate_name2_id" class="control-label u-no-break">Politician Name 2 (for Google Civic matching)</label>
		<div class="">
			<input type="text" name="google_civic_candidate_name2" id="google_civic_candidate_name2_id" class="form-control"
				value="{% if politician %}{{ politician.google_civic_candidate_name2|default_if_none:"" }}{% else %}{{ google_civic_candidate_name2|default_if_none:"" }}{% endif %}" />
		</div>
	</div>

	<div class="form-group col-sm-3 mr-1">
		<label for="google_civic_candidate_name3_id" class="control-label u-no-break">Politician Name 3 (for Google Civic matching)</label>
		<div class="">
			<input type="text" name="google_civic_candidate_name3" id="google_civic_candidate_name3_id" class="form-control"
				value="{% if politician %}{{ politician.google_civic_candidate_name3|default_if_none:"" }}{% else %}{{ google_civic_candidate_name3|default_if_none:"" }}{% endif %}" />
		</div>
	</div>
</div>

<div class="form-group">
    <label for="ballotpedia_politician_name_id" class="col-sm-3 control-label">Name from Ballotpedia</label>
    <div class="col-sm-8">
        <input type="text" name="ballotpedia_politician_name" id="ballotpedia_politician_name_id" class="form-control"
               value="{% if politician %}{{ politician.ballotpedia_politician_name|default_if_none:"" }}{% else %}{{ ballotpedia_politician_name|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="state_code_id" class="col-sm-3 control-label">State Code</label>
    <div class="col-sm-8">
        <input type="text" name="state_code" id="state_code_id" class="form-control"
               value="{% if politician %}{{ politician.state_code|default_if_none:"" }}{% else %}{{ state_code|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="political_party_id" class="col-sm-3 control-label">Politician Party</label>
    <div class="col-sm-8">
        <input type="text" name="political_party" id="political_party_id" class="form-control"
               value="{% if politician %}{{ politician.political_party|default_if_none:"" }}{% else %}{{ political_party|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="vote_usa_politician_id_id" class="col-sm-3 control-label">Vote USA Politician Id</label>
    <div class="col-sm-8">
        <input type="text" name="vote_usa_politician_id" id="vote_usa_politician_id_id" class="form-control"
               value="{% if politician %}{{ politician.vote_usa_politician_id|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_twitter_handle_id" class="col-sm-3 control-label">Twitter Handle</label>
    <div class="col-sm-8">
        <input type="text" name="politician_twitter_handle" id="politician_twitter_handle_id" class="form-control"
               value="{% if politician %}{{ politician.politician_twitter_handle|default_if_none:"" }}{% else %}{{ politician_twitter_handle|default_if_none:"" }}{% endif %}" />
    {% if politician.politician_twitter_handle %}
        <input type="checkbox" name="twitter_handle_updates_failing" id="twitter_handle_updates_failing_id" value="1"
                {% if politician.twitter_handle_updates_failing %}checked{% endif %} />
        <label for="twitter_handle_updates_failing_id" style="font-weight: normal !important;">Twitter Handle Updates Failing{% if politician.twitter_handle_updates_failing %}. <span style="color: darkgray">Our automated Twitter data update script had trouble retrieving a handle. Uncheck when fixed.</span>{% endif %}</label><br />
        <a href="https://twitter.com/{{ politician.politician_twitter_handle|iriencode }}"
           target="_blank">View on Twitter <span class="glyphicon glyphicon-new-window"></span></a>&nbsp;&nbsp;&nbsp;
        <a href="{% url 'import_export_twitter:refresh_twitter_politician_details' politician.id %}">Refresh Twitter Details</a><br />
        Twitter Name: {{ politician.twitter_name }}<br />
        Twitter Description: {{ politician.twitter_description }}<br />
        Twitter Location: {{ politician.twitter_location }}<br />
        Twitter Followers: {{ politician.twitter_followers_count|intcomma }}<br />
    {% endif %}
    {% if politician.twitter_url %}Twitter URL (from Google Civic): {{ politician.twitter_url }}{% endif %}
    </div>
</div>

<div class="form-group">
    <label for="politician_twitter_handle2_id" class="col-sm-3 control-label">Twitter Handle 2</label>
    <div class="col-sm-8">
        <input type="text" name="politician_twitter_handle2" id="politician_twitter_handle2_id" class="form-control"
               value="{% if politician %}{{ politician.politician_twitter_handle2|default_if_none:"" }}{% else %}{{ politician_twitter_handle2|default_if_none:"" }}{% endif %}" />
    {% if politician.politician_twitter_handle2 %}
        <input type="checkbox" name="twitter_handle2_updates_failing" id="twitter_handle2_updates_failing_id" value="1"
                {% if politician.twitter_handle2_updates_failing %}checked{% endif %} />
        <label for="twitter_handle2_updates_failing_id" style="font-weight: normal !important;">Twitter Handle 2 Updates Failing{% if politician.twitter_handle2_updates_failing %}. <span style="color: darkgray">Our automated Twitter data update script had trouble retrieving a handle. Uncheck when fixed.</span>{% endif %}</label><br />
        <a href="https://twitter.com/{{ politician.politician_twitter_handle2|iriencode }}"
           target="_blank">View on Twitter <span class="glyphicon glyphicon-new-window"></span></a>&nbsp;&nbsp;&nbsp;
        <a href="{% url 'import_export_twitter:refresh_twitter_politician_details' politician.id %}?twitter_handle={{ politician.politician_twitter_handle2 }}">Make Primary Handle</a>
    {% endif %}
    </div>
</div>

<div class="form-group">
    <label for="politician_twitter_handle3_id" class="col-sm-3 control-label">Twitter Handle 3</label>
    <div class="col-sm-8">
        <input type="text" name="politician_twitter_handle3" id="politician_twitter_handle3_id" class="form-control"
               value="{% if politician %}{{ politician.politician_twitter_handle3|default_if_none:"" }}{% else %}{{ politician_twitter_handle3|default_if_none:"" }}{% endif %}" />
    {% if politician.politician_twitter_handle3 %}
        <a href="https://twitter.com/{{ politician.politician_twitter_handle3|iriencode }}"
           target="_blank">View on Twitter <span class="glyphicon glyphicon-new-window"></span></a>&nbsp;&nbsp;&nbsp;
        <a href="{% url 'import_export_twitter:refresh_twitter_politician_details' politician.id %}?twitter_handle={{ politician.politician_twitter_handle3 }}">Make Primary Handle</a>
    {% endif %}
    </div>
</div>

<div class="form-group">
    <label for="politician_twitter_handle4_id" class="col-sm-3 control-label">Twitter Handle 4</label>
    <div class="col-sm-8">
        <input type="text" name="politician_twitter_handle4" id="politician_twitter_handle4_id" class="form-control"
               value="{% if politician %}{{ politician.politician_twitter_handle4|default_if_none:"" }}{% else %}{{ politician_twitter_handle4|default_if_none:"" }}{% endif %}" />
    {% if politician.politician_twitter_handle4 %}
        <a href="https://twitter.com/{{ politician.politician_twitter_handle4|iriencode }}"
           target="_blank">View on Twitter <span class="glyphicon glyphicon-new-window"></span></a>&nbsp;&nbsp;&nbsp;
        <a href="{% url 'import_export_twitter:refresh_twitter_politician_details' politician.id %}?twitter_handle={{ politician.politician_twitter_handle4 }}">Make Primary Handle</a>
    {% endif %}
    </div>
</div>

<div class="form-group">
    <label for="politician_twitter_handle5_id" class="col-sm-3 control-label">Twitter Handle 5</label>
    <div class="col-sm-8">
        <input type="text" name="politician_twitter_handle5" id="politician_twitter_handle5_id" class="form-control"
               value="{% if politician %}{{ politician.politician_twitter_handle5|default_if_none:"" }}{% else %}{{ politician_twitter_handle5|default_if_none:"" }}{% endif %}" />
    {% if politician.politician_twitter_handle5 %}
        <a href="https://twitter.com/{{ politician.politician_twitter_handle5|iriencode }}"
           target="_blank">View on Twitter <span class="glyphicon glyphicon-new-window"></span></a>&nbsp;&nbsp;&nbsp;
        <a href="{% url 'import_export_twitter:refresh_twitter_politician_details' politician.id %}?twitter_handle={{ politician.politician_twitter_handle5 }}">Make Primary Handle</a>
    {% endif %}
    </div>
</div>

<div class="form-group">
    <label for="politician_url_id" class="col-sm-3 control-label">
        Politician Website
        {% if politician.politician_url %}
        <a href="{{ politician.politician_url }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="politician_url" id="politician_url_id" class="form-control"
               value="{% if politician %}{{ politician.politician_url|default_if_none:"" }}{% else %}{{ politician_url|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_url2_id" class="col-sm-3 control-label">
        Website 2
        {% if politician.politician_url2 %}
        <a href="{{ politician.politician_url2 }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="politician_url2" id="politician_url2_id" class="form-control"
               value="{% if politician %}{{ politician.politician_url2|default_if_none:"" }}{% else %}{{ politician_url2|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_url3_id" class="col-sm-3 control-label">
        Website 3
        {% if politician.politician_url3 %}
        <a href="{{ politician.politician_url3 }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="politician_url3" id="politician_url3_id" class="form-control"
               value="{% if politician %}{{ politician.politician_url3|default_if_none:"" }}{% else %}{{ politician_url3|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_url4_id" class="col-sm-3 control-label">
        Website 4
        {% if politician.politician_url4 %}
        <a href="{{ politician.politician_url4 }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="politician_url4" id="politician_url4_id" class="form-control"
               value="{% if politician %}{{ politician.politician_url4|default_if_none:"" }}{% else %}{{ politician_url4|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_url5_id" class="col-sm-3 control-label">
        Website 5
        {% if politician.politician_url5 %}
        <a href="{{ politician.politician_url5 }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="politician_url5" id="politician_url5_id" class="form-control"
               value="{% if politician %}{{ politician.politician_url5|default_if_none:"" }}{% else %}{{ politician_url5|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="ballot_guide_official_statement_id" class="col-sm-3 control-label">Official Candidate Statement</label>
    <div class="col-sm-8">
        <textarea name="ballot_guide_official_statement"
                  class="form-control animated"
                  id="ballot_guide_official_statement_id"
                  placeholder="Enter official statement from politician">{% if politician %}{{ politician.ballot_guide_official_statement|default_if_none:"" }}{% else %}{{ ballot_guide_official_statement|default_if_none:"" }}{% endif %}</textarea>
    </div>
</div>

<div class="form-group">
    <label for="politician_contact_form_url_id" class="col-sm-3 control-label">
        Politician Contact Form
        {% if politician.politician_contact_form_url %}
        <a href="{{ politician.politician_contact_form_url }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="politician_contact_form_url" id="politician_contact_form_url_id" class="form-control"
               value="{% if politician %}{{ politician.politician_contact_form_url|default_if_none:"" }}{% else %}{{ politician_contact_form_url|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="facebook_url_id" class="col-sm-3 control-label">
        Facebook URL
        {% if politician.facebook_url %}
        <a href="{{ politician.facebook_url }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="facebook_url" id="facebook_url_id" class="form-control"
               value="{% if politician %}{{ politician.facebook_url|default_if_none:"" }}{% else %}{{ facebook_url|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="facebook_url2_id" class="col-sm-3 control-label">
        Facebook URL 2
        {% if politician.facebook_url2 %}
        <a href="{{ politician.facebook_url2 }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="facebook_url2" id="facebook_url2_id" class="form-control"
               value="{% if politician %}{{ politician.facebook_url2|default_if_none:"" }}{% else %}{{ facebook_url2|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="facebook_url3_id" class="col-sm-3 control-label">
        Facebook URL 3
        {% if politician.facebook_url3 %}
        <a href="{{ politician.facebook_url3 }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="facebook_url3" id="facebook_url3_id" class="form-control"
               value="{% if politician %}{{ politician.facebook_url3|default_if_none:"" }}{% else %}{{ facebook_url3|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="instagram_handle_id" class="col-sm-3 control-label">
        Instagram Handle
        {% if politician.instagram_handle %}
        <a href="https://www.instagram.com/{{ politician.instagram_handle }}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a>
        {% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="instagram_handle" id="instagram_handle_id" class="form-control"
               value="{% if politician %}{{ politician.instagram_handle|default_if_none:"" }}{% else %}{{ instagram_handle|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_email_id" class="col-sm-3 control-label">Politician Email</label>
    <div class="col-sm-8">
        <input type="text" name="politician_email" id="politician_email_id" class="form-control"
               value="{% if politician %}{{ politician.politician_email|default_if_none:"" }}{% else %}{{ politician_email|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_email2_id" class="col-sm-3 control-label">Email 2</label>
    <div class="col-sm-8">
        <input type="text" name="politician_email2" id="politician_email2_id" class="form-control"
               value="{% if politician %}{{ politician.politician_email2|default_if_none:"" }}{% else %}{{ politician_email2|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_email3_id" class="col-sm-3 control-label">Email 3</label>
    <div class="col-sm-8">
        <input type="text" name="politician_email3" id="politician_email3_id" class="form-control"
               value="{% if politician %}{{ politician.politician_email3|default_if_none:"" }}{% else %}{{ politician_email3|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_phone_number_id" class="col-sm-3 control-label">Politician Phone</label>
    <div class="col-sm-8">
        <input type="text" name="politician_phone_number" id="politician_phone_number_id" class="form-control"
               value="{% if politician %}{{ politician.politician_phone_number|default_if_none:"" }}{% else %}{{ politician_phone_number|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_phone_number2_id" class="col-sm-3 control-label">Phone 2</label>
    <div class="col-sm-8">
        <input type="text" name="politician_phone_number2" id="politician_phone_number2_id" class="form-control"
               value="{% if politician %}{{ politician.politician_phone_number2|default_if_none:"" }}{% else %}{{ politician_phone_number2|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="politician_phone_number3_id" class="col-sm-3 control-label">Phone 3</label>
    <div class="col-sm-8">
        <input type="text" name="politician_phone_number3" id="politician_phone_number3_id" class="form-control"
               value="{% if politician %}{{ politician.politician_phone_number3|default_if_none:"" }}{% else %}{{ politician_phone_number3|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="ballotpedia_politician_url_id" class="col-sm-3 control-label">
        Ballotpedia Politician Page
        {% if politician and politician.ballotpedia_politician_url %}(<a href="{{ politician.ballotpedia_politician_url }}" target="_blank">Go</a>){% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="ballotpedia_politician_url" id="ballotpedia_politician_url_id" class="form-control"
               value="{% if politician %}{{ politician.ballotpedia_politician_url|default_if_none:"" }}{% else %}{{ ballotpedia_politician_url|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="wikipedia_url_id" class="col-sm-3 control-label">
        Wikipedia Page
        {% if politician and politician.wikipedia_url %}(<a href="{{ politician.wikipedia_url }}" target="_blank">Go</a>){% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="wikipedia_url" id="wikipedia_url_id" class="form-control"
               value="{% if politician %}{{ politician.wikipedia_url|default_if_none:"" }}{% else %}{{ wikipedia_url|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="linkedin_url_id" class="col-sm-3 control-label">
        LinkedIn
        {% if politician and politician.linkedin_url %}(<a href="{{ politician.linkedin_url }}" target="_blank">Go</a>){% endif %}
    </label>
    <div class="col-sm-8">
        <input type="text" name="linkedin_url" id="linkedin_url_id" class="form-control"
               value="{% if politician %}{{ politician.linkedin_url|default_if_none:"" }}{% else %}{{ linkedin_url|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="vote_smart_id_id" class="col-sm-3 control-label">Vote Smart Id</label>
    <div class="col-sm-8">
        <input type="text" name="vote_smart_id" id="vote_smart_id_id" class="form-control"
               value="{% if politician %}{{ politician.vote_smart_id|default_if_none:"" }}{% else %}{{ vote_smart_id|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="maplight_id_id" class="col-sm-3 control-label">MapLight Id</label>
    <div class="col-sm-8">
        <input type="text" name="maplight_id" id="maplight_id_id" class="form-control"
               value="{% if politician %}{{ politician.maplight_id|default_if_none:"" }}{% else %}{{ maplight_id|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="birth_date_id" class="col-sm-3 control-label">Birthdate (format Feb. 16, 1955)</label>
    <div class="col-sm-8">
        <input type="text" name="birth_date" id="birth_date_id" class="form-control"
               value="{% if politician %}{{ politician.birth_date|default_if_none:"" }}{% else %}{{ birth_date|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<div class="form-group">
    <label for="youtube_url_id" class="col-sm-3 control-label">YouTube URL</label>
    <div class="col-sm-8">
        <input type="text" name="youtube_url" id="youtube_url_id" class="form-control"
               value="{% if politician %}{{ politician.youtube_url|default_if_none:"" }}{% else %}{{ youtube_url|default_if_none:"" }}{% endif %}" />
    </div>
</div>

<p><a href="{% url 'politician:politician_list' %}?state_code={{ state_code }}">cancel</a>
<input name="submit_text" type="submit" value="{% if politician %}Update Politician{% else %}Save New Politician{% endif %}" /></p>

<br />
{% if politician %}

{% if linked_candidate_list %}
    <h4>
        Candidates Linked to this Politician
        (<a href="{% url 'candidate:candidate_new_search_process' %}?candidate_name_search={{ politician.politician_name }}&politician_we_vote_id_for_start={{ politician.we_vote_id }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
            target="_blank">Start Add Candidate Process&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>)
    </h4>
    <table class="table">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td class="padded">Candidate Name</td>
            <td class="padded">State</td>
            <td class="padded">Election</td>
            <td class="padded">Office</td>
            <td class="padded">Twitter Handle</td>
            <td class="padded">Website</td>
            <td class="padded">Id</td>
            <td class="padded">We Vote Ids</td>
            <td class="padded">Other Ids</td>
        </tr>
    {% for candidate in linked_candidate_list %}
        <tr>
            <td class="padded_td">{{ forloop.counter }}</td>
            <td class="padded">
                {% if candidate.candidate_photo_url %}
                <a href="{% url 'candidate:candidate_edit' candidate.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ candidate.candidate_photo_url }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td class="padded">
                <a href="{% url 'candidate:candidate_edit' candidate.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">{{ candidate.candidate_name }} <span class="glyphicon glyphicon-new-window"></span></a>
                <br />
                <span class="u-no-break">
                    <input type="checkbox"
                           name="unlink_candidate_{{ candidate.id }}_from_politician"
                           id="unlink_candidate_{{ candidate.id }}_from_politician_id"
                           value=1
                    />
                    unlink from politician
                </span>
            </td>
            <td class="padded">{{ candidate.get_candidate_state }}</td>
            <td class="padded">
                {{ candidate.election.election_name }} - {{ candidate.election.google_civic_election_id }}<br />
                {% if candidate.candidate_year %}Year: {{ candidate.candidate_year }}{% else %}{{ candidate.election.election_day_text }}{% endif %}
            </td>
            <td class="padded">
                {% if candidate.office %}
                    <a href="{% url 'office:office_summary' candidate.office.id %}" target="_blank">{{ candidate.office.office_name }} <span class="glyphicon glyphicon-new-window"></span></a>
                {% else %}
                    (office missing)
                {% endif %}
            </td>
            <td class="padded">
                {% if candidate.candidate_twitter_handle %}<a href="https://twitter.com/{{ candidate.candidate_twitter_handle }}"
                    target="_blank">{{ candidate.candidate_twitter_handle }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a><br />
                ({{ candidate.twitter_followers_count|intcomma }} followers){% endif %}</td>
            <td class="padded">
                {% if candidate.candidate_url %}<a href="{{ candidate.candidate_url }}" target="_blank" target="_blank">{{ candidate.candidate_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if candidate.candidate_contact_form_url %}<a href="{{ candidate.candidate_contact_form_url }}" target="_blank" target="_blank">{{ candidate.candidate_contact_form_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
            </td>
            <td class="padded">{{ candidate.id }}</td>
            <td class="padded">
                {{ candidate.we_vote_id }}
                {% if candidate.politician_we_vote_id %}
                    {{ candidate.politician_we_vote_id }}
                {% endif %}
            </td>
            <td class="padded">
                {% if candidate.vote_smart_id %}VS: {{ candidate.vote_smart_id|default_if_none:"" }}<br />{% endif %}
                {% if candidate.vote_usa_politician_id %}{{ candidate.vote_usa_politician_id|default_if_none:"" }}<br />{% endif %}
                <a href="{% url 'politician:update_politician_from_candidate' %}?politician_we_vote_id={{ candidate.politician_we_vote_id }}&candidate_we_vote_id={{ candidate.we_vote_id }}">
                    update politician from this candidate</a><br />
                <a href="{% url 'candidate:update_candidate_from_politician' %}?politician_we_vote_id={{ candidate.politician_we_vote_id }}&candidate_we_vote_id={{ candidate.we_vote_id }}"
                   target="_blank">
                    update this candidate from politician&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>
            </td>
        </tr>
    {% endfor %}
    </table>
<input name="submit_text" type="submit" value="{% if politician %}Unlink These Candidates From This Politician{% endif %}" />
    <p>&nbsp;</p>
    <p>&nbsp;</p>
{% else %}
    <h4>
        <a href="{% url 'candidate:candidate_new_search_process' %}?candidate_name_search={{ politician.politician_name }}&politician_we_vote_id_for_start={{ politician.we_vote_id }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}"
           target="_blank">
            Start Add Candidate Process</a>&nbsp;<span class="glyphicon glyphicon-new-window"></span>
    </h4>
    <p>(no linked candidates found)</p>
{% endif %}



{% if related_candidate_list %}
    <h4>Candidates That Might Match This Politician</h4>
    <table class="table">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Candidate Name</td>
            <td>State</td>
            <td>Election</td>
            <td>Office</td>
            <td>Twitter Handle</td>
            <td>Website</td>
            <td>Id</td>
            <td>We Vote Ids</td>
            <td>Vote Smart Vote USA Id</td>
        </tr>
    {% for candidate in related_candidate_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if candidate.candidate_photo_url %}
                <a href="{% url 'candidate:candidate_edit' candidate.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ candidate.candidate_photo_url }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td><a href="{% url 'candidate:candidate_edit' candidate.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">{{ candidate.candidate_name }} <span class="glyphicon glyphicon-new-window"></span></a>
            &nbsp;
                <br />
                <span class="u-no-break">
                    <input type="checkbox"
                           name="link_candidate_{{ candidate.id }}_to_politician"
                           id="link_candidate_{{ candidate.id }}_to_politician_id"
                           value=1
                    />
                    link to politician
                </span>
            </td>
            <td>{{ candidate.get_candidate_state }}</td>
            <td>
                {{ candidate.election.election_name }} - {{ candidate.election.google_civic_election_id }}<br />
                {% if candidate.candidate_year %}Year: {{ candidate.candidate_year }}{% else %}{{ candidate.election.election_day_text }}{% endif %}
            </td>
            <td>
                {% if candidate.office %}
                        <a href="{% url 'office:office_summary' candidate.office.id %}" target="_blank">{{ candidate.office.office_name }} <span class="glyphicon glyphicon-new-window"></span></a>
                {% else %}
                    (office missing)
                {% endif %}
            </td>
            <td>{% if candidate.candidate_twitter_handle %}<a href="https://twitter.com/{{ candidate.candidate_twitter_handle }}"
                    target="_blank">{{ candidate.candidate_twitter_handle }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a><br />
                ({{ candidate.twitter_followers_count|intcomma }} followers){% endif %}</td>
            <td>
                {% if candidate.candidate_url %}<a href="{{ candidate.candidate_url }}" target="_blank">{{ candidate.candidate_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if candidate.candidate_contact_form_url %}<br /><a href="{{ candidate.candidate_contact_form_url }}" target="_blank">{{ candidate.candidate_contact_form_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
            </td>
            <td>{{ candidate.id }}</td>
            <td>{{ candidate.we_vote_id }}
                {% if candidate.politician_we_vote_id %}
                    {{ candidate.politician_we_vote_id }}
                {% else %}
                    ("pol"&nbsp;missing)
                {% endif %}
            </td>
            <td>
                {{ candidate.vote_smart_id|default_if_none:"" }}
                {{ candidate.vote_usa_politician_id|default_if_none:"" }}
                <br />
                <a href="{% url 'candidate:remove_duplicate_candidates' %}?candidate_name={{ candidate.candidate_name }}&google_civic_election_id={{ candidate.google_civic_election_id }}&politician_we_vote_id={{ politician.we_vote_id }}&state_code={{ candidate.state_code }}"
                   target="_blank">analyze duplicates <span class="glyphicon glyphicon-new-window"></span></a>
            </td>
        </tr>
    {% endfor %}
    </table>
<input name="submit_text" type="submit" value="{% if politician %}Link These Candidates to This Politician{% endif %}" />
    <p>&nbsp;</p>
    <p>&nbsp;</p>
{% endif %}

{# ####################### #}
{# ### Representatives ### #}
{% if linked_representative_list %}
    <h4>Representatives Linked to this Politician</h4>
    <table class="table">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td class="padded">Representative Name</td>
            <td class="padded">State</td>
            <td class="padded">Office Held</td>
            <td class="padded">Twitter Handle</td>
            <td class="padded">Websites</td>
            <td class="padded">Ids</td>
        </tr>
    {% for representative in linked_representative_list %}
        <tr>
            <td class="padded_td">{{ forloop.counter }}</td>
            <td class="padded">
                {% if representative.we_vote_hosted_profile_image_url_medium %}
                <a href="{% url 'representative:representative_edit' representative.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ representative.we_vote_hosted_profile_image_url_medium }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td class="padded">
                <a href="{% url 'representative:representative_edit' representative.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">{{ representative.representative_name }} <span class="glyphicon glyphicon-new-window"></span></a>
                <br />
                <span class="u-no-break">
                    <input type="checkbox"
                           name="unlink_representative_{{ representative.id }}_from_politician"
                           id="unlink_representative_{{ representative.id }}_from_politician_id"
                           value=1
                    />
                    unlink rep from politician
                </span>
            </td>
            <td class="padded">{{ representative.state_code }}</td>
            <td class="padded">
                <div>
                {% if representative.office_held_name %}
                    <a href="{% url 'office_held:office_held_summary' representative.office_held_we_vote_id %}" target="_blank">{{ representative.office_held_name }}
                        {% if representative.office_held and representative.office_held.district_name %} for {{ representative.office_held.district_name }}{% endif %}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>
                {% else %}
                    (office missing)
                {% endif %}
                </div>
                {% if representative.ocd_division_id %}
                    <div style="color: darkgray">
                    {{ representative.ocd_division_id }}
                    </div>
                {% endif %}
                <span class="u-no-break">In office:
        {% if representative.year_in_office_2023 %}2023 {% endif %}
        {% if representative.year_in_office_2024 %}2024 {% endif %}
        {% if representative.year_in_office_2025 %}2025 {% endif %}
        {% if representative.year_in_office_2026 %}2026 {% endif %}
                </span>
                {% if representative.office_held_we_vote_id %}
                    &nbsp;&nbsp;&nbsp;{{ representative.office_held_we_vote_id }}
                {% endif %}
            </td>
            <td class="padded">{% if representative.representative_twitter_handle %}<a href="https://twitter.com/{{ representative.representative_twitter_handle }}"
                    target="_blank">{{ representative.representative_twitter_handle }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a><br />
                ({{ representative.twitter_followers_count|intcomma }} followers){% endif %}</td>
            <td class="padded">
                {% if representative.representative_url %}<a href="{{ representative.representative_url }}" target="_blank" target="_blank">{{ representative.representative_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}</td>
                {% if representative.representative_contact_form_url %}<br /><a href="{{ representative.representative_contact_form_url }}" target="_blank" target="_blank">{{ representative.representative_contact_form_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
            </td>
            <td class="padded">
                {{ representative.id }}&nbsp;
                {{ representative.we_vote_id }}&nbsp;
                {% if representative.politician_we_vote_id %}
                    {{ representative.politician_we_vote_id }}&nbsp;
                {% endif %}
                {{ representative.vote_usa_politician_id|default_if_none:"" }}
            </td>
        </tr>
    {% endfor %}
    </table>
<input name="submit_text" type="submit" value="{% if politician %}Unlink These Representatives From This Politician{% endif %}" />
    <p>&nbsp;</p>
    <p>&nbsp;</p>
{% else %}
    <p>(no linked representatives found)</p>
{% endif %}



{% if related_representative_list %}
    <h4>Representatives That Might Match This Politician</h4>
    <table class="table">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Representative Name</td>
            <td>State</td>
            <td>Election</td>
            <td>Office</td>
            <td>Twitter Handle</td>
            <td>Website</td>
            <td>Id</td>
        </tr>
    {% for representative in related_representative_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if representative.we_vote_hosted_profile_image_url_medium %}
                <a href="{% url 'representative:representative_edit' representative.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ representative.we_vote_hosted_profile_image_url_medium }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td><a href="{% url 'representative:representative_edit' representative.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">{{ representative.representative_name }} <span class="glyphicon glyphicon-new-window"></span></a>
            &nbsp;
                <br />
                <span class="u-no-break">
                    <input type="checkbox"
                           name="link_representative_{{ representative.id }}_to_politician"
                           id="link_representative_{{ representative.id }}_to_politician_id"
                           value=1
                    />
                    link to politician
                </span>
            </td>
            <td>{{ representative.state_code }}</td>
            <td>
                <span class="u-no-break">In office:
        {% if representative.year_in_office_2023 %}2023 {% endif %}
        {% if representative.year_in_office_2024 %}2024 {% endif %}
        {% if representative.year_in_office_2025 %}2025 {% endif %}
        {% if representative.year_in_office_2026 %}2026 {% endif %}
                </span>
            </td>
            <td>
                <div>
                {% if representative.office_held_name %}
                    <a href="{% url 'office_held:office_held_summary' representative.office_held_we_vote_id %}" target="_blank">{{ representative.office_held_name }}
                        {% if representative.office_held and representative.office_held.district_name %} for {{ representative.office_held.district_name }}{% endif %}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>
                {% else %}
                    (office missing)
                {% endif %}
                </div>
                {% if representative.ocd_division_id %}
                    <div style="color: darkgray">
                    {{ representative.ocd_division_id }}
                    </div>
                {% endif %}
            </td>
            <td>{% if representative.representative_twitter_handle %}<a href="https://twitter.com/{{ representative.representative_twitter_handle }}"
                    target="_blank">{{ representative.representative_twitter_handle }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a><br />
                ({{ representative.twitter_followers_count|intcomma }} followers){% endif %}</td>
            <td>
                {% if representative.representative_url %}<a href="{{ representative.representative_url }}" target="_blank">{{ representative.representative_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if representative.representative_contact_form_url %}<br /><a href="{{ representative.representative_contact_form_url }}" target="_blank">{{ representative.representative_contact_form_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
            </td>
            <td>{{ representative.id }}</td>
            <td>{{ representative.we_vote_id }}
                {% if representative.politician_we_vote_id %}
                    {{ representative.politician_we_vote_id }}
                {% else %}
                    ("pol"&nbsp;missing)
                {% endif %}
            </td>
            <td>
                {{ representative.vote_usa_politician_id|default_if_none:"" }}
            </td>
        </tr>
    {% endfor %}
    </table>
<input name="submit_text" type="submit" value="{% if politician %}Link These Representatives to This Politician{% endif %}" />
    <p>&nbsp;</p>
    <p>&nbsp;</p>
{% endif %}
{# ### End of representatives section ### #}
{# ###################################### #}


{# ####################### #}
{# ### Linked & Related CampaignX Lists ### #}
{% if linked_campaignx_list %}
    <h4>Campaigns Linked to this Politician</h4>
    <table class="table">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td class="padded">Campaign Title</td>
            <td class="padded">SEO Friendly Path</td>
            <td class="padded">Ids</td>
        </tr>
    {% for campaignx in linked_campaignx_list %}
        <tr>
            <td class="padded_td">{{ forloop.counter }}</td>
            <td class="padded">
                {% if campaignx.we_vote_hosted_campaign_photo_medium_url %}
                <a href="{% url 'campaign:campaignx_summary' campaignx.we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ campaignx.we_vote_hosted_campaign_photo_medium_url }}' height="48px" />
                </a>
                {% elif campaignx.we_vote_hosted_profile_image_url_medium %}
                <a href="{% url 'campaign:campaignx_summary' campaignx.we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ campaignx.we_vote_hosted_profile_image_url_medium }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td class="padded">
                <a href="{% url 'campaign:campaignx_summary' campaignx.we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    {{ campaignx.campaign_title }} <span class="glyphicon glyphicon-new-window"></span></a>
                <br />
                {{ campaignx.supporters_count|intcomma }} supporters
            </td>
            <td class="padded">
                {% if campaignx.seo_friendly_path %}<a href="https://quality.wevote.us/c/{{ campaignx.seo_friendly_path }}" target="_blank" target="_blank">
                    {{ campaignx.seo_friendly_path }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}</td>
            </td>
            <td class="padded">
                {{ campaignx.id }}&nbsp;
                {{ campaignx.we_vote_id }}&nbsp;
                {% if campaignx.linked_politician_we_vote_id %}
                    {{ campaignx.linked_politician_we_vote_id }}&nbsp;
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </table>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
{% else %}
    <p>(no linked campaignx entries found)</p>
{% endif %}



{% if related_campaignx_list %}
    <h4>Campaigns That Might Match This Politician</h4>
    <table class="table">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Campaign Title</td>
            <td>SEO Friendly Path</td>
            <td>Id</td>
        </tr>
    {% for related_campaignx in related_campaignx_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if related_campaignx.we_vote_hosted_campaign_photo_medium_url %}
                <a href="{% url 'campaign:campaignx_summary' related_campaignx.we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ related_campaignx.we_vote_hosted_campaign_photo_medium_url }}' height="48px" />
                </a>
                {% elif related_campaignx.we_vote_hosted_profile_image_url_medium %}
                <a href="{% url 'campaign:campaignx_summary' related_campaignx.we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ related_campaignx.we_vote_hosted_profile_image_url_medium }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td><a href="{% url 'campaign:campaignx_summary' related_campaignx.we_vote_id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                {{ related_campaignx.campaign_title }} <span class="glyphicon glyphicon-new-window"></span></a>
            &nbsp;
                <br />
                {{ related_campaignx.supporters_count|intcomma }} supporters
                {% if politician_linked_campaignx_we_vote_id %}
                &nbsp;&nbsp;
                <a href="{% url 'campaign:compare_two_campaigns_for_merge' %}?campaignx1_we_vote_id={{ politician_linked_campaignx_we_vote_id }}&campaignx2_we_vote_id={{ related_campaignx.we_vote_id }}" target="_blank">
                    compare for merge <span class="glyphicon glyphicon-new-window"></span></a>
                {% endif %}
            </td>
            <td class="padded">
                {% if related_campaignx.seo_friendly_path %}<a href="https://quality.wevote.us/c/{{ related_campaignx.seo_friendly_path }}" target="_blank" target="_blank">{{ related_campaignx.seo_friendly_path }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}</td>
            </td>
            <td>{{ related_campaignx.id }} &nbsp;
                {{ related_campaignx.we_vote_id }}
                {% if related_campaignx.linked_politician_we_vote_id %}
                    {{ related_campaignx.linked_politician_we_vote_id }}
                {% else %}
                    ("pol"&nbsp;missing)
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </table>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
{% endif %}
{# ### End of CampaignX section ### #}
{# ###################################### #}

</form>



{% if duplicate_politician_list %}
    <h4>Possible Duplicate Politicians</h4>
    <table class="table">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Politician Name</td>
            <td>State</td>
            <td>Twitter Handle</td>
            <td>Website</td>
            <td>Id</td>
            <td>We Vote Id</td>
            <td>Vote Smart Id</td>
        </tr>
    {% for found_politician in duplicate_politician_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if found_politician.politician_photo_url %}
                <a href="{% url 'politician:politician_edit' found_politician.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">
                    <img src='{{ found_politician.politician_photo_url }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td>
                <a href="{% url 'politician:politician_edit' found_politician.id %}?google_civic_election_id={{ google_civic_election_id }}" target="_blank">{{ found_politician.politician_name }} <span class="glyphicon glyphicon-new-window"></span></a>
                <br />
                <a href="{% url 'politician:compare_two_politicians_for_merge' %}?politician1_we_vote_id={{ politician.we_vote_id }}&politician2_we_vote_id={{ found_politician.we_vote_id }}&google_civic_election_id={{ google_civic_election_id }}&state_code={{ state_code }}" target="_blank" class="u-no-break">compare for merge</a>
            </td>
            <td>{{ found_politician.state_code|default_if_none:"" }}</td>
            <td>
                {% if found_politician.politician_twitter_handle %}<a href="https://twitter.com/{{ found_politician.politician_twitter_handle }}"
                    target="_blank">{{ found_politician.politician_twitter_handle }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a><br />
                ({{ found_politician.twitter_followers_count|intcomma }} followers){% endif %}
                {% if found_politician.politician_twitter_handle2 %}<br /><a href="https://twitter.com/{{ found_politician.politician_twitter_handle2 }}"
                    target="_blank">{{ found_politician.politician_twitter_handle2 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if found_politician.politician_twitter_handle3 %}<br /><a href="https://twitter.com/{{ found_politician.politician_twitter_handle3 }}"
                    target="_blank">{{ found_politician.politician_twitter_handle3 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if found_politician.politician_twitter_handle4 %}<br /><a href="https://twitter.com/{{ found_politician.politician_twitter_handle4 }}"
                    target="_blank">{{ found_politician.politician_twitter_handle4 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if found_politician.politician_twitter_handle5 %}<br /><a href="https://twitter.com/{{ found_politician.politician_twitter_handle5 }}"
                    target="_blank">{{ found_politician.politician_twitter_handle5 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
            </td>
            <td>
                {% if found_politician.politician_url %}<a href="{{ found_politician.politician_url }}" target="_blank">{{ found_politician.politician_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if found_politician.politician_url2 %}<br /><a href="{{ found_politician.politician_url2 }}" target="_blank">{{ found_politician.politician_url2 }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if found_politician.politician_url3 %}<br /><a href="{{ found_politician.politician_url3 }}" target="_blank">{{ found_politician.politician_url3 }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if found_politician.politician_url4 %}<br /><a href="{{ found_politician.politician_url4 }}" target="_blank">{{ found_politician.politician_url4 }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if found_politician.politician_url5 %}<br /><a href="{{ found_politician.politician_url5 }}" target="_blank">{{ found_politician.politician_url5 }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
            </td>
            <td>{{ found_politician.id }}</td>
            <td>{{ found_politician.we_vote_id }}</td>
            <td>{{ found_politician.vote_smart_id }}</td>
        </tr>
    {% endfor %}
    </table>
{% endif %}




<a href="{% url 'politician:politician_retrieve_photos' politician.id %}">Retrieve photos</a><br />
    {% if politician.politician_photo_url %}
    <img src='{{ politician.politician_photo_url }}' />
    {% endif %}

    {% if politician.we_vote_hosted_profile_image_url_large %}
    <img src='{{ politician.we_vote_hosted_profile_image_url_large }}' /><br />
    we_vote_hosted_profile_image_url_large
    {% endif %}

    <h4>We Vote Positions Related to {{ politician.politician_name  }}</h4>
    {% if politician.vote_smart_id %}
        <p><a href="{% url 'import_export_vote_smart:transfer_vote_smart_ratings_to_positions_for_politician' politician.id %}">Transfer Vote Smart Ratings to We Vote Positions</a></p>
    {% endif %}

        <p><a href="{% url 'organization:organization_list' %}?politician_we_vote_id={{ politician.we_vote_id }}" target="_blank">
            Add Position (start with Endorser taking the Position) <span class="glyphicon glyphicon-new-window"></span></a></p>

    {% if politician_position_list %}
    <table class="table">
      <thead>
        <tr>
            <th></th>
            <th>Endorser</th>
            <th>Stance</th>
            <th>Election</th>
            <th>Election Date</th>
        </tr>
      </thead>
    {% for politician_position in politician_position_list %}
        {% if not politician_position.id %}
        <tr>
            <td colspan="3">
            (missing politician_position.id)
            </td>
        </tr>
        {% else %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if politician_position.organization_id %}
                <a href="{% url 'organization:organization_position_edit' politician_position.organization_id politician_position.we_vote_id %}">
                {{ politician_position.organization.organization_name }}</a>
                {% else %}
                    (not an org)
                {% endif %}
                {% if politician_position.organization.twitter_followers_count %}
                    <br />
                    <span style="color: darkgray" class="u-no-break">(<i class="fa fa-twitter"></i> {{ politician_position.organization.twitter_followers_count|intcomma }} Twitter Followers)</span>
                {% endif %}
            </td>
            <td>{{ politician_position.get_stance_display }}
                {% if politician_position.statement_text %}
                <span style="color: darkgray">{{ politician_position.statement_text }}</span>
                {% endif %}
{#                {% if politician_position.vote_smart_rating %} {{ politician_position.vote_smart_rating }}%{% endif %}#}
                {% if politician_position.more_info_url %}
                    <br />
                    <a href="{{ politician_position.more_info_url }}"
                       target="_blank"
                       class="u-no-break"
                    >{{ politician_position.more_info_url }} <span class="glyphicon glyphicon-new-window"></span></a>
                {% endif %}
            </td>
            <td>{{ politician_position.election.google_civic_election_id }}</td>
            <td>{{ politician_position.election.election_day_text }}</td>
        </tr>
        {% endif %}
        {% endfor %}

        </table>
    {% else %}
        <p>(no positions found)</p>
    {% endif %}

    {% if politician.vote_smart_id and politician.vote_smart_id != False and politician.vote_smart_id != 'False' and politician.vote_smart_id != None and politician.vote_smart_id != 'None' %}
        <h4>Vote Smart Ratings</h4>
        <p><a href="{% url 'import_export_vote_smart:import_one_politician_ratings' politician.vote_smart_id %}">Import Vote Smart Ratings for this Politician</a></p>

        {% if rating_list %}
            <table border="1">
            <tr>
                <td></td>
                <td>ratingId</td>
                <td>sigId</td>
                <td>ratingName</td>
                <td>timeSpan</td>
                <td>candidateId</td>
                <td>rating</td>
            </tr>

            {% for special_interest_group_rating in rating_list %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ special_interest_group_rating.ratingId }}</td>
                <td><a href="{% url 'import_export_vote_smart:special_interest_group_rating_list' special_interest_group_rating.sigId %}" target="_blank">
                    {{ special_interest_group_rating.sigId }} <span class="glyphicon glyphicon-new-window"></span></a></td>
                <td>{{ special_interest_group_rating.ratingName }}</td>
                <td>{{ special_interest_group_rating.timeSpan }}</td>
                <td>{{ special_interest_group_rating.candidateId }}</td>
                <td>{{ special_interest_group_rating.rating }}</td>
            </tr>
            {% endfor %}

            </table>
        {% else %}
            <p>(no special interest group ratings found)</p>
        {% endif %}
    {% endif %}{# End of if politician.vote_smart_id #}
    <br />

    {% if politician.twitter_profile_image_url_https_original %}
        <img src="{{ politician.twitter_profile_image_url_https_original }}"><br />
        Twitter Image (Original)<br />
    {% endif %}

    {% if politician.twitter_profile_banner_url_https %}
        <img src="{{ politician.twitter_profile_banner_url_https }}"><br />
        Twitter Banner<br />
    {% endif %}
{% else %}

{# Only show other politicians running for this office when we are entering a new politician #}
{% if politician_list %}
<h5>Existing Politicians</h5>
    <table border="1" cellpadding="5" cellspacing="5">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>Politician Name</td>
            <td>State</td>
            <td>Twitter Handle</td>
            <td>Website</td>
            <td>Id</td>
            <td>We Vote Id</td>
            <td>Vote Smart Id</td>
            <td>&nbsp;</td>
        </tr>
    {% for politician in politician_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if politician.politician_photo_url %}
                <a href="{% url 'politician:politician_edit' politician.id %}">
                    <img src='{{ politician.politician_photo_url }}' height="48px" />
                </a>
                {% endif %}
            </td>
            <td><a href="{% url 'politician:politician_edit' politician.id %}">{{ politician.politician_name }}</a></td>
            <td>{{ politician.state_code }}</td>
            <td>
                {% if politician.politician_twitter_handle %}<a href="https://twitter.com/{{ politician.politician_twitter_handle }}"
                    target="_blank">{{ politician.politician_twitter_handle }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a><br />
                ({{ politician.twitter_followers_count|intcomma }} followers){% endif %}
                {% if politician.politician_twitter_handle2 %}<br /><a href="https://twitter.com/{{ politician.politician_twitter_handle2 }}"
                    target="_blank">{{ politician.politician_twitter_handle2 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if politician.politician_twitter_handle3 %}<br /><a href="https://twitter.com/{{ politician.politician_twitter_handle3 }}"
                    target="_blank">{{ politician.politician_twitter_handle3 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if politician.politician_twitter_handle4 %}<br /><a href="https://twitter.com/{{ politician.politician_twitter_handle4 }}"
                    target="_blank">{{ politician.politician_twitter_handle4 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
                {% if politician.politician_twitter_handle5 %}<br /><a href="https://twitter.com/{{ politician.politician_twitter_handle5 }}"
                    target="_blank">{{ politician.politician_twitter_handle5 }}&nbsp;<span class="glyphicon glyphicon-new-window"></span></a>{% endif %}
            </td>
            <td>{% if politician.politician_url %}<a href="{{ politician.politician_url }}" target="_blank">{{ politician.politician_url }} <span class="glyphicon glyphicon-new-window"></span></a>{% endif %}</td>
            <td>{{ politician.id }}</td>
            <td>{{ politician.we_vote_id }}</td>
            <td>{{ politician.vote_smart_id }}</td>
            <td><a href="{% url 'politician:politician_edit' politician.id %}" style="font-size: .65em">(edit)</a></td>
        </tr>
    {% endfor %}
    </table>

    <p></p>
{% else %}
    {# Don't display anything if there aren't any other politicians captured for this office yet #}
{% endif %}

{% endif %}{# End of if politician #}

<script>
    $(function() {
        $('#state_code_id').change(function() {
            this.form.submit();
        });
    });
</script>

<style>
    .animated {
        -webkit-transition: height 0.2s;
        -moz-transition: height 0.2s;
        transition: height 0.2s;
    }
</style>
<script>
    function setSourceOfGenderId () {
        const source = $('#sourceString');
        if (source.length > 0) {
            switch (source.text()) {
                case 'PolDataMgr':
                    source.text('Political Data Mgr');
                    break;
                case 'Politician':
                    source.text('Politician Provided');
                    break;
                case 'GuessHigh':
                    source.text('Gender Guesser High Likelihood');
                    break;
                case 'GuessLow':
                    source.text('Gender Guesser Low Likelihood');
                    break;
                default:
                    source.text('None');
                    break;
            }
        }
    }

    $(() => {
        const { autosize } = window;
        autosize($('.normal'));
        autosize($('.animated'));
        $('#update_name_id').click(function(evt) {
          name = $('#hidden_name').text();
          $("input[name='politician_name']").val(name);
          $('#update_name_id').prop('disabled', true).css('opacity',0.5);
        });

        // On click for gender buttons
        $("input[id^=gender_]").on('click', (event) => {
          const id = event.currentTarget.id;
          const source = $('#sourceString');
          source.text('gender_female_id,gender_male_id,gender_neutral_id'.indexOf(id) > -1 ? 'Political Data Mgr' : 'None');
        });
        // on page load translate the database token for politician.gender_likelihood to the text version
        setSourceOfGenderId();
    });

</script>

{% endblock %}
